<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Galer√≠a de Productos con Carrito</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: relative;
        }
        
        h1 {
            color: #333;
            margin-bottom: 10px;
        }
        
        .navigation {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .nav-button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        
        .nav-button:hover {
            background-color: #45a049;
        }
        
        .nav-button.active {
            background-color: #2E7D32;
        }
        
        .cart-button {
            position: absolute;
            top: 20px;
            right: 20px;
            background-color: #2196F3;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        .cart-button:hover {
            background-color: #0b7dda;
        }
        
        .cart-count {
            background-color: #ff5722;
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: bold;
        }
        
        .add-product-form {
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #555;
        }
        
        input, textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }
        
        button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin-right: 10px;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #45a049;
        }
        
        .btn-delete {
            background-color: #f44336;
        }
        
        .btn-delete:hover {
            background-color: #d32f2f;
        }
        
        .btn-edit {
            background-color: #ff9800;
        }
        
        .btn-edit:hover {
            background-color: #f57c00;
        }
        
        .btn-add-cart {
            background-color: #2196F3;
            width: 100%;
            padding: 10px;
            margin-top: 10px;
        }
        
        .btn-add-cart:hover {
            background-color: #0b7dda;
        }
        
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }
        
        .product-card {
            background-color: #fff;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s;
            display: flex;
            flex-direction: column;
        }
        
        .product-card:hover {
            transform: translateY(-5px);
        }
        
        .product-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-bottom: 1px solid #eee;
        }
        
        .product-info {
            padding: 15px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        
        .product-title {
            font-size: 18px;
            margin-bottom: 10px;
            color: #333;
        }
        
        .product-description {
            color: #666;
            margin-bottom: 15px;
            font-size: 14px;
            flex-grow: 1;
        }
        
        .product-price {
            font-size: 20px;
            font-weight: bold;
            color: #4CAF50;
            margin-bottom: 15px;
        }
        
        .product-actions {
            display: flex;
            justify-content: space-between;
        }
        
        .empty-state {
            text-align: center;
            padding: 40px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .empty-state p {
            color: #666;
            margin-bottom: 20px;
        }
        
        .image-preview {
            max-width: 100%;
            max-height: 200px;
            margin-top: 10px;
            border-radius: 4px;
            display: block;
        }
        
        .file-input-label {
            display: inline-block;
            padding: 10px 15px;
            background-color: #4CAF50;
            color: white;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 5px;
        }
        
        .file-input {
            display: none;
        }
        
        /* Estilos para el carrito */
        .cart-container {
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }
        
        .cart-item {
            display: flex;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #eee;
        }
        
        .cart-item-image {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 4px;
            margin-right: 15px;
        }
        
        .cart-item-details {
            flex-grow: 1;
        }
        
        .cart-item-title {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .cart-item-price {
            color: #4CAF50;
            font-weight: bold;
        }
        
        .cart-item-quantity {
            display: flex;
            align-items: center;
            margin: 10px 0;
        }
        
        .quantity-btn {
            background-color: #ddd;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
        }
        
        .quantity-input {
            width: 40px;
            height: 30px;
            text-align: center;
            margin: 0 5px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .cart-item-remove {
            color: #f44336;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 18px;
            margin-left: 15px;
        }
        
        .cart-summary {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid #eee;
            text-align: right;
        }
        
        .cart-total {
            font-size: 24px;
            font-weight: bold;
            color: #333;
            margin-bottom: 20px;
        }
        
        .checkout-btn {
            background-color: #4CAF50;
            padding: 15px 30px;
            font-size: 18px;
        }
        
        .checkout-btn:hover {
            background-color: #2E7D32;
        }
        
        .cart-empty {
            text-align: center;
            padding: 40px;
            color: #666;
        }
        
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .modal {
            background-color: #fff;
            border-radius: 8px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
        }
        
        .modal-title {
            margin-bottom: 20px;
            text-align: center;
            color: #333;
        }
        
        .modal-actions {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 25px;
        }
        
        /* Estilos para el formulario de cliente */
        .customer-form {
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        /* Estilos para la confirmaci√≥n de pedido */
        .order-confirmation {
            background-color: #fff;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            text-align: center;
        }
        
        .confirmation-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
            text-align: left;
        }
        
        .detail-card {
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #4CAF50;
        }
        
        .detail-label {
            font-weight: bold;
            color: #555;
            margin-bottom: 5px;
        }
        
        .detail-value {
            font-size: 18px;
            color: #333;
        }
        
        /* Estilos para la tabla de pedidos */
        .orders-section {
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }
        
        .orders-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .orders-table th,
        .orders-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        .orders-table th {
            background-color: #f5f5f5;
            font-weight: 600;
            color: #333;
        }
        
        .orders-table tr:hover {
            background-color: #f9f9f9;
        }
        
        .no-orders {
            text-align: center;
            padding: 30px;
            color: #666;
        }
        
        @media (max-width: 768px) {
            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
            
            .cart-item {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .cart-item-image {
                margin-bottom: 10px;
            }
            
            .cart-item-quantity {
                margin: 10px 0;
            }
            
            .cart-button {
                position: relative;
                top: unset;
                right: unset;
                margin: 10px auto;
            }
            
            .navigation {
                flex-direction: column;
                align-items: center;
            }
            
            .confirmation-details {
                grid-template-columns: 1fr;
            }
            
            .orders-table {
                display: block;
                overflow-x: auto;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Componente para administrar productos
        const ProductManager = () => {
            const [products, setProducts] = useState([]);
            const [newProduct, setNewProduct] = useState({
                title: "",
                description: "",
                price: "",
                image: ""
            });
            const [editingId, setEditingId] = useState(null);
            const [imagePreview, setImagePreview] = useState("");

            // Cargar productos desde localStorage al iniciar
            useEffect(() => {
                const savedProducts = localStorage.getItem('products');
                if (savedProducts) {
                    setProducts(JSON.parse(savedProducts));
                }
            }, []);

            // Guardar productos en localStorage cuando cambien
            useEffect(() => {
                localStorage.setItem('products', JSON.stringify(products));
            }, [products]);

            const handleInputChange = (e) => {
                const { name, value } = e.target;
                setNewProduct({
                    ...newProduct,
                    [name]: value
                });
            };

            const handleImageUpload = (e) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onloadend = () => {
                        const base64String = reader.result;
                        setNewProduct({
                            ...newProduct,
                            image: base64String
                        });
                        setImagePreview(base64String);
                    };
                    reader.readAsDataURL(file);
                }
            };

            const handleAddProduct = () => {
                if (!newProduct.title || !newProduct.price) {
                    alert("Por favor, complete al menos el nombre y el precio del producto.");
                    return;
                }

                if (editingId !== null) {
                    // Modo edici√≥n
                    setProducts(products.map(product => 
                        product.id === editingId 
                            ? { ...newProduct, id: editingId } 
                            : product
                    ));
                    setEditingId(null);
                } else {
                    // Modo agregar
                    const newId = products.length > 0 ? Math.max(...products.map(p => p.id)) + 1 : 1;
                    setProducts([...products, { ...newProduct, id: newId }]);
                }
                
                // Resetear formulario
                setNewProduct({
                    title: "",
                    description: "",
                    price: "",
                    image: ""
                });
                setImagePreview("");
            };

            const handleEditProduct = (product) => {
                setNewProduct({
                    title: product.title,
                    description: product.description,
                    price: product.price,
                    image: product.image
                });
                setImagePreview(product.image);
                setEditingId(product.id);
            };

            const handleDeleteProduct = (id) => {
                if (window.confirm("¬øEst√°s seguro de que quieres eliminar este producto?")) {
                    setProducts(products.filter(product => product.id !== id));
                }
            };

            const handleCancelEdit = () => {
                setNewProduct({
                    title: "",
                    description: "",
                    price: "",
                    image: ""
                });
                setImagePreview("");
                setEditingId(null);
            };

            return (
                <div className="container">
                    <header>
                        <h1>Administrador de Productos</h1>
                        <p>Agrega, edita o elimina productos</p>
                    </header>

                    <div className="add-product-form">
                        <h2>{editingId ? "Editar Producto" : "Agregar Nuevo Producto"}</h2>
                        <div className="form-group">
                            <label htmlFor="title">Nombre del Producto:</label>
                            <input
                                type="text"
                                id="title"
                                name="title"
                                value={newProduct.title}
                                onChange={handleInputChange}
                                placeholder="Ej. Zapatillas Deportivas"
                            />
                        </div>
                        <div className="form-group">
                            <label htmlFor="description">Descripci√≥n:</label>
                            <textarea
                                id="description"
                                name="description"
                                value={newProduct.description}
                                onChange={handleInputChange}
                                rows="3"
                                placeholder="Describe el producto..."
                            />
                        </div>
                        <div className="form-group">
                            <label htmlFor="price">Precio ($):</label>
                            <input
                                type="number"
                                id="price"
                                name="price"
                                value={newProduct.price}
                                onChange={handleInputChange}
                                placeholder="Ej. 49.99"
                                step="0.01"
                            />
                        </div>
                        <div className="form-group">
                            <label htmlFor="image">Imagen del Producto:</label>
                            <label htmlFor="image-upload" className="file-input-label">
                                Seleccionar imagen
                            </label>
                            <input
                                type="file"
                                id="image-upload"
                                className="file-input"
                                accept="image/*"
                                onChange={handleImageUpload}
                            />
                            {imagePreview && (
                                <img src={imagePreview} alt="Vista previa" className="image-preview" />
                            )}
                        </div>
                        <div>
                            <button onClick={handleAddProduct}>
                                {editingId ? "Guardar Cambios" : "Agregar Producto"}
                            </button>
                            {editingId && (
                                <button onClick={handleCancelEdit} className="btn-delete">
                                    Cancelar Edici√≥n
                                </button>
                            )}
                        </div>
                    </div>

                    <h2>Productos Existentes</h2>
                    {products.length === 0 ? (
                        <div className="empty-state">
                            <h3>No hay productos a√∫n</h3>
                            <p>Comienza agregando tu primer producto usando el formulario superior.</p>
                        </div>
                    ) : (
                        <div className="products-grid">
                            {products.map(product => (
                                <div key={product.id} className="product-card">
                                    <img 
                                        src={product.image} 
                                        alt={product.title}
                                        className="product-image"
                                        onError={(e) => {
                                            e.target.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2VlZSIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBkeT0iLjM1ZW0iIHRleHQtYW5jaG9yPSJtaWRkbLEiIGZvbnQtc2l6ZT0iMjAiIGZpbGw9IiM4ODgiPkltYWdlbiBubyBlbmNvbnRyYWRhPC90ZXh0Pjwvc3ZnPg==';
                                        }}
                                    />
                                    <div className="product-info">
                                        <h3 className="product-title">{product.title}</h3>
                                        <p className="product-description">{product.description}</p>
                                        <p className="product-price">${parseFloat(product.price).toFixed(2)}</p>
                                        <div className="product-actions">
                                            <button 
                                                className="btn-edit"
                                                onClick={() => handleEditProduct(product)}
                                            >
                                                Editar
                                            </button>
                                            <button 
                                                className="btn-delete"
                                                onClick={() => handleDeleteProduct(product.id)}
                                            >
                                                Eliminar
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            ))}
                        </div>
                    )}
                </div>
            );
        };

        // Componente para la galer√≠a de productos
        const ProductGallery = ({ addToCart }) => {
            const [products, setProducts] = useState([]);

            // Cargar productos desde localStorage al iniciar
            useEffect(() => {
                const savedProducts = localStorage.getItem('products');
                if (savedProducts) {
                    setProducts(JSON.parse(savedProducts));
                }
            }, []);

            return (
                <div className="container">
                    <header>
                        <h1>Galer√≠a de Productos</h1>
                        <p>Explora nuestros productos</p>
                    </header>

                    {products.length === 0 ? (
                        <div className="empty-state">
                            <h2>No hay productos en la galer√≠a</h2>
                            <p>Ve al administrador para agregar productos.</p>
                        </div>
                    ) : (
                        <div className="products-grid">
                            {products.map(product => (
                                <div key={product.id} className="product-card">
                                    <img 
                                        src={product.image} 
                                        alt={product.title}
                                        className="product-image"
                                        onError={(e) => {
                                            e.target.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2VlZSIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBkeT0iLjM1ZW0iIHRleHQtYW5jaG9yPSJtaWRkbLEiIGZvbnQtc2l6ZT0iMjAiIGZpbGw9IiM4ODgiPkltYWdlbiBubyBlbmNvbnRyYWRhPC90ZXh0Pjwvc3ZnPg==';
                                        }}
                                    />
                                    <div className="product-info">
                                        <h3 className="product-title">{product.title}</h3>
                                        <p className="product-description">{product.description}</p>
                                        <p className="product-price">${parseFloat(product.price).toFixed(2)}</p>
                                        <button 
                                            className="btn-add-cart"
                                            onClick={() => addToCart(product)}
                                        >
                                            <i className="fas fa-cart-plus"></i> Agregar al carrito
                                        </button>
                                    </div>
                                </div>
                            ))}
                        </div>
                    )}
                </div>
            );
        };

        // Componente para el formulario de datos del cliente
        const CustomerForm = ({ onSubmit, onCancel }) => {
            const [customerData, setCustomerData] = useState({
                fullName: "",
                email: "",
                phone: ""
            });

            const handleInputChange = (e) => {
                const { name, value } = e.target;
                setCustomerData({
                    ...customerData,
                    [name]: value
                });
            };

            const handleSubmit = (e) => {
                e.preventDefault();
                if (!customerData.fullName || !customerData.email || !customerData.phone) {
                    alert("Por favor, complete todos los campos.");
                    return;
                }
                onSubmit(customerData);
            };

            return (
                <div className="modal-overlay">
                    <div className="modal">
                        <h3 className="modal-title">Datos del Cliente</h3>
                        <form onSubmit={handleSubmit} className="customer-form">
                            <div className="form-group">
                                <label htmlFor="fullName">Nombre Completo:</label>
                                <input
                                    type="text"
                                    id="fullName"
                                    name="fullName"
                                    value={customerData.fullName}
                                    onChange={handleInputChange}
                                    placeholder="Ej. Juan P√©rez"
                                />
                            </div>
                            <div className="form-group">
                                <label htmlFor="email">Correo Electr√≥nico:</label>
                                <input
                                    type="email"
                                    id="email"
                                    name="email"
                                    value={customerData.email}
                                    onChange={handleInputChange}
                                    placeholder="ejemplo@correo.com"
                                />
                            </div>
                            <div className="form-group">
                                <label htmlFor="phone">N√∫mero de Tel√©fono:</label>
                                <input
                                    type="tel"
                                    id="phone"
                                    name="phone"
                                    value={customerData.phone}
                                    onChange={handleInputChange}
                                    placeholder="+1234567890"
                                />
                            </div>
                            <div className="modal-actions">
                                <button type="button" onClick={onCancel}>Cancelar</button>
                                <button type="submit" className="checkout-btn">Continuar</button>
                            </div>
                        </form>
                    </div>
                </div>
            );
        };

        // Componente para la confirmaci√≥n de pedido
        const OrderConfirmation = ({ orderData, onClose }) => {
            return (
                <div className="modal-overlay">
                    <div className="modal" style={{ maxWidth: '600px' }}>
                        <h3 className="modal-title">¬°Pedido Confirmado!</h3>
                        <div className="order-confirmation">
                            <p>Gracias por tu compra. Tu pedido ha sido procesado exitosamente.</p>
                            
                            <div className="confirmation-details">
                                <div className="detail-card">
                                    <div className="detail-label">N√∫mero de Tarjeta</div>
                                    <div className="detail-value">4152 **** **** ****</div>
                                </div>
                                <div className="detail-card">
                                    <div className="detail-label">Nombre del Titular</div>
                                    <div className="detail-value">Nathali Estrada Abundis</div>
                                </div>
                                <div className="detail-card">
                                    <div className="detail-label">Fecha de Entrega</div>
                                    <div className="detail-value">27/10/2025</div>
                                </div>
                                <div className="detail-card">
                                    <div className="detail-label">Cliente</div>
                                    <div className="detail-value">{orderData.customer.fullName}</div>
                                </div>
                                <div className="detail-card">
                                    <div className="detail-label">Correo Electr√≥nico</div>
                                    <div className="detail-value">{orderData.customer.email}</div>
                                </div>
                                <div className="detail-card">
                                    <div className="detail-label">Tel√©fono</div>
                                    <div className="detail-value">{orderData.customer.phone}</div>
                                </div>
                            </div>
                            
                            <p>Recibir√°s un correo electr√≥nico con los detalles de tu pedido.</p>
                        </div>
                        <div className="modal-actions">
                            <button onClick={onClose}>Cerrar</button>
                        </div>
                    </div>
                </div>
            );
        };

        // Componente para el carrito de compras
        const ShoppingCart = ({ cartItems, updateQuantity, removeFromCart, showCart, setShowCart, onCheckout }) => {
            const calculateTotal = () => {
                return cartItems.reduce((total, item) => total + (parseFloat(item.price) * item.quantity), 0);
            };

            if (!showCart) return null;

            return (
                <div className="cart-container">
                    <h2>Tu Carrito de Compras</h2>
                    
                    {cartItems.length === 0 ? (
                        <div className="cart-empty">
                            <p>Tu carrito est√° vac√≠o</p>
                            <p>Agrega algunos productos desde la galer√≠a</p>
                        </div>
                    ) : (
                        <>
                            {cartItems.map(item => (
                                <div key={item.id} className="cart-item">
                                    <img 
                                        src={item.image} 
                                        alt={item.title}
                                        className="cart-item-image"
                                        onError={(e) => {
                                            e.target.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2VlZSIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBkeT0iLjM1ZW0iIHRleHQtYW5jaG9y="middle" font-size="20" fill="#888">Imagen no encontrada</text></svg>';
                                        }}
                                    />
                                    <div className="cart-item-details">
                                        <div className="cart-item-title">{item.title}</div>
                                        <div className="cart-item-price">${parseFloat(item.price).toFixed(2)}</div>
                                        <div className="cart-item-quantity">
                                            <button 
                                                className="quantity-btn"
                                                onClick={() => updateQuantity(item.id, item.quantity - 1)}
                                                disabled={item.quantity <= 1}
                                            >-</button>
                                            <input 
                                                type="number" 
                                                className="quantity-input"
                                                value={item.quantity}
                                                onChange={(e) => {
                                                    const newQuantity = parseInt(e.target.value);
                                                    if (!isNaN(newQuantity) && newQuantity > 0) {
                                                        updateQuantity(item.id, newQuantity);
                                                    }
                                                }}
                                                min="1"
                                            />
                                            <button 
                                                className="quantity-btn"
                                                onClick={() => updateQuantity(item.id, item.quantity + 1)}
                                            >+</button>
                                        </div>
                                    </div>
                                    <button 
                                        className="cart-item-remove"
                                        onClick={() => removeFromCart(item.id)}
                                        aria-label="Eliminar producto"
                                    >
                                        <i className="fas fa-trash"></i>
                                    </button>
                                </div>
                            ))}
                            
                            <div className="cart-summary">
                                <div className="cart-total">
                                    Total: ${calculateTotal().toFixed(2)}
                                </div>
                                <button className="checkout-btn" onClick={onCheckout}>
                                    Realizar Pedido
                                </button>
                            </div>
                        </>
                    )}
                </div>
            );
        };

        // Componente para la secci√≥n de pedidos
        const OrdersSection = ({ orders }) => {
            return (
                <div className="orders-section">
                    <h2>Historial de Pedidos</h2>
                    
                    {orders.length === 0 ? (
                        <div className="no-orders">
                            <p>No hay pedidos registrados</p>
                        </div>
                    ) : (
                        <table className="orders-table">
                            <thead>
                                <tr>
                                    <th>N¬∞ de Pedido</th>
                                    <th>Cliente</th>
                                    <th>Correo Electr√≥nico</th>
                                    <th>Tel√©fono</th>
                                    <th>Total</th>
                                    <th>Fecha</th>
                                </tr>
                            </thead>
                            <tbody>
                                {orders.map((order, index) => (
                                    <tr key={index}>
                                        <td>{index + 1}</td>
                                        <td>{order.customer.fullName}</td>
                                        <td>{order.customer.email}</td>
                                        <td>{order.customer.phone}</td>
                                        <td>${order.total.toFixed(2)}</td>
                                        <td>{new Date(order.date).toLocaleDateString()}</td>
                                    </tr>
                                ))}
                            </tbody>
                        </table>
                    )}
                </div>
            );
        };

        // Componente principal que maneja la navegaci√≥n
        const App = () => {
            const [currentView, setCurrentView] = useState('gallery');
            const [cartItems, setCartItems] = useState([]);
            const [showCart, setShowCart] = useState(false);
            const [showCustomerForm, setShowCustomerForm] = useState(false);
            const [showOrderConfirmation, setShowOrderConfirmation] = useState(false);
            const [currentOrder, setCurrentOrder] = useState(null);
            const [orders, setOrders] = useState([]);

            // Cargar carrito y pedidos desde localStorage al iniciar
            useEffect(() => {
                const savedCart = localStorage.getItem('cart');
                if (savedCart) {
                    try {
                        setCartItems(JSON.parse(savedCart));
                    } catch (e) {
                        console.error("Error parsing cart data", e);
                        localStorage.removeItem('cart');
                    }
                }

                const savedOrders = localStorage.getItem('orders');
                if (savedOrders) {
                    try {
                        setOrders(JSON.parse(savedOrders));
                    } catch (e) {
                        console.error("Error parsing orders data", e);
                        localStorage.removeItem('orders');
                    }
                }
            }, []);

            // Guardar carrito en localStorage cuando cambie
            useEffect(() => {
                localStorage.setItem('cart', JSON.stringify(cartItems));
            }, [cartItems]);

            // Guardar pedidos en localStorage cuando cambien
            useEffect(() => {
                localStorage.setItem('orders', JSON.stringify(orders));
            }, [orders]);

            const addToCart = (product) => {
                const existingItem = cartItems.find(item => item.id === product.id);
                
                if (existingItem) {
                    setCartItems(cartItems.map(item =>
                        item.id === product.id
                            ? { ...item, quantity: item.quantity + 1 }
                            : item
                    ));
                } else {
                    setCartItems([...cartItems, { ...product, quantity: 1 }]);
                }
                
                // Mostrar el carrito autom√°ticamente al agregar un producto
                setShowCart(true);
            };

            const updateQuantity = (productId, newQuantity) => {
                if (newQuantity < 1) newQuantity = 1;
                
                setCartItems(cartItems.map(item =>
                    item.id === productId
                        ? { ...item, quantity: newQuantity }
                        : item
                ));
            };

            const removeFromCart = (productId) => {
                setCartItems(cartItems.filter(item => item.id !== productId));
            };

            const getCartItemsCount = () => {
                return cartItems.reduce((count, item) => count + item.quantity, 0);
            };

            const handleCheckout = () => {
                setShowCustomerForm(true);
            };

            const handleCustomerSubmit = (customerData) => {
                setShowCustomerForm(false);
                
                // Calcular el total del pedido
                const total = cartItems.reduce((sum, item) => sum + (parseFloat(item.price) * item.quantity), 0);
                
                // Crear el objeto de pedido
                const order = {
                    customer: customerData,
                    items: [...cartItems],
                    total: total,
                    date: new Date().toISOString()
                };
                
                // Guardar el pedido actual
                setCurrentOrder(order);
                
                // Agregar a la lista de pedidos
                setOrders([...orders, order]);
                
                // Limpiar el carrito
                setCartItems([]);
                
                // Mostrar la confirmaci√≥n
                setShowOrderConfirmation(true);
            };

            const handleCloseConfirmation = () => {
                setShowOrderConfirmation(false);
                setCurrentOrder(null);
            };

            return (
                <div className="container">
                    <header>
                        <h1>Tienda Online</h1>
                        <div className="navigation">
                            <button 
                                className={`nav-button ${currentView === 'gallery' ? 'active' : ''}`}
                                onClick={() => setCurrentView('gallery')}
                            >
                                Galer√≠a de Productos
                            </button>
                            <button 
                                className={`nav-button ${currentView === 'manager' ? 'active' : ''}`}
                                onClick={() => setCurrentView('manager')}
                            >
                                Administrar Productos
                            </button>
                            <button 
                                className={`nav-button ${currentView === 'orders' ? 'active' : ''}`}
                                onClick={() => setCurrentView('orders')}
                            >
                                Ver Pedidos
                            </button>
                        </div>
                        
                        <button 
                            className="cart-button"
                            onClick={() => setShowCart(!showCart)}
                        >
                            <i className="fas fa-shopping-cart"></i>
                            <span className="cart-count">{getCartItemsCount()}</span>
                        </button>
                    </header>

                    {currentView === 'manager' && <ProductManager />}
                    {currentView === 'gallery' && <ProductGallery addToCart={addToCart} />}
                    {currentView === 'orders' && <OrdersSection orders={orders} />}

                    {showCart && (
                        <ShoppingCart 
                            cartItems={cartItems}
                            updateQuantity={updateQuantity}
                            removeFromCart={removeFromCart}
                            showCart={showCart}
                            setShowCart={setShowCart}
                            onCheckout={handleCheckout}
                        />
                    )}

                    {showCustomerForm && (
                        <CustomerForm 
                            onSubmit={handleCustomerSubmit}
                            onCancel={() => setShowCustomerForm(false)}
                        />
                    )}

                    {showOrderConfirmation && currentOrder && (
                        <OrderConfirmation 
                            orderData={currentOrder}
                            onClose={handleCloseConfirmation}
                        />
                    )}
                </div>
            );
        };

        // Renderizar la aplicaci√≥n
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>